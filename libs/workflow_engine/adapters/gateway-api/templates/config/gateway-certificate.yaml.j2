{# Source: zerotouch-platform/bootstrap/argocd/overlays/main/core/gateway/gateway-config/gateway-certificate.yaml #}
{# Migration: Converted to Jinja2 template with domain from config #}
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: {{ domain | replace('.', '-') }}-tls-cert
  namespace: kube-system
  labels:
    app.kubernetes.io/name: {{ domain | replace('.', '-') }}-tls-cert
    app.kubernetes.io/component: bootstrap-certificate
    app.kubernetes.io/part-of: zerotouch-platform
spec:
  secretName: {{ domain | replace('.', '-') }}-tls-cert
  commonName: {{ domain }}
  dnsNames:
    - "{{ domain }}"
    - "*.{{ domain }}"
  issuerRef:
    name: letsencrypt-production
    kind: ClusterIssuer
